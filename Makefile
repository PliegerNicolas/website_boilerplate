# **************************************************************************** #
# *                              GENERAL INFO                                * #
# **************************************************************************** #

NAME			:=			boilerplate

# **************************************************************************** #
# *                                 DOCKER                                   * #
# **************************************************************************** #

DC			:=			docker compose

# **************************************************************************** #
# *                                FUNCTIONS                                 * #
# **************************************************************************** #

define build_volume_folders
	mkdir -p ./data/postgresql/nestjs
	mkdir -p ./data/redis
endef

# **************************************************************************** #
# *                                  RULES                                   * #
# **************************************************************************** #

all:	up

up:
	$(call build_volume_folders)
	${DC} up -d --build

down:
	${DC} down -v --remove-orphans

clean: down

fclean: down purge

re: down up

purge:
	docker system prune -fa

.PHONY: up down clean fclean re purge
